<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        height: 200vh; /* vh : 화면의 1/100 높이 */
      }
      #top-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: none;
        transition: all 1s;
      }
      #top-btn.visible {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Web Storage</h2>
      <section>
        <input id="storage-key" placeholder="Key" />
        <input id="storage-value" placeholder="Value" />
        <button id="local-save-btn">Local 저장</button>
        <button id="local-read-btn">Local 읽기</button>
        <p id="storage-result">결과 표시</p>
      </section>
      <h2>Location & History</h2>
      <section>
        <button id="move-btn">페이지 이동</button>
        <button id="back-btn">뒤로 가기</button>
      </section>
      <h2>Clipboard</h2>
      <section>
        <p id="copy-text">이 텍스트를 복사 :)</p>
        <button id="copy-btn">텍스트 복사</button>
      </section>
    </div>
    <button id="top-btn">TOP</button>
    <script>
      // 1. Web Storage
      const keyInput = document.querySelector("#storage-key");
      const valueInput = document.querySelector("#storage-value");
      const storageResult = document.querySelector("#storage-result");
      document
        .querySelector("#local-save-btn")
        .addEventListener("click", () => {
          const { value: keyVal } = keyInput; // 구조분해 할당으로 리팩토링
          const { value: valueVal } = valueInput;
          //   if (keyInput.value && valueInput.value) {
          if (keyVal && valueVal) {
            // localStorage.setItem(keyInput.value, valueInput.value);
            localStorage.setItem(keyVal, valueVal);
          }
        });
      document
        .querySelector("#local-read-btn")
        .addEventListener("click", () => {
          const { value: keyVal } = keyInput; // 구조분해 할당으로 리팩토링
          if (keyVal) {
            const valueVal = localStorage.getItem(keyVal);
            valueInput.value = valueVal;

            // storageResult.textContent = valueVal ? valueVal : "값이 없습니다";
            storageResult.textContent = valueVal || "값이 없습니다";
          }
        });
      // 2. Location & History
      document.querySelector("#move-btn").addEventListener("click", () => {
        location.href = "https://www.google.com";
      });
      document.querySelector("#back-btn").addEventListener("click", () => {
        history.back();
        // history.go(-1)
      });
      // 3. Clipboard
      document.querySelector("#copy-btn").addEventListener("click", () => {
        const text = document.querySelector("#copy-text").textContent;
        navigator.clipboard.writeText(text).then(() => alert("복사완료!!!"));
      });
      // 4. Scroll Event & Top Button
      const topBtn = document.getElementById("top-btn");
      window.addEventListener("scroll", () => {
        console.log(window.scrollY);
        if (window.scrollY > 200) {
          topBtn.classList.add("visible");
        } else {
          topBtn.classList.remove("visible");
        }
      });
      topBtn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    </script>
  </body>
</html>
